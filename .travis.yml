language: node_js
node_js:
    - node
    - lts/*

cache:
    directories:
        - node_modules

before_deploy:
    - yarn build
    - rm -rf node_modules/

jobs:
    include:
        - stage: Tests
          name: Lint
          script: yarn lint
        - stage: deploy
          if: branch = 48-deploy-ghpages
          name: Deploy to Github Pages
          script: skip
          deploy:
              provider: pages
              skip_cleanup: true
              github_token: $github_token
              local_dir: public
              on:
                  branch: 48-deploy-ghpages
